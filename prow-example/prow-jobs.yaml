presubmits:
  liweinan/my-prow-test-proj:
    - name: unit-test
      always_run: true
      decorate: true
      agent: kubernetes
      cluster: default
      max_concurrency: 10
      trigger: "(?m)^/test(\\s+|$)"
      rerun_command: "/test"
      extra_refs:
        - org: liweinan
          repo: my-prow-test-proj
          base_ref: main
      spec:
        containers:
          - image: golang:1.18
            command:
              - go
            args:
              - test
            env:
              - name: HTTP_PROXY
                value: "http://192.168.0.123:1080"
              - name: HTTPS_PROXY
                value: "http://192.168.0.123:1080"
              - name: NO_PROXY
                value: "localhost,127.0.0.1,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,10.152.183.1"
            resources:
              requests:
                cpu: "100m"
                memory: "100Mi"
              limits:
                cpu: "500m"
                memory: "500Mi"
    - name: unit-test-no-decoration
      always_run: true
      decorate: false
      agent: kubernetes
      cluster: default
      max_concurrency: 10
      trigger: "(?m)^/test-no-decoration(\\s+|$)"
      rerun_command: "/test-no-decoration"
      spec:
        containers:
          - image: golang:1.18
            command:
              - go
            args:
              - test
            resources:
              requests:
                cpu: "100m"
                memory: "100Mi"
              limits:
                cpu: "500m"
                memory: "500Mi"